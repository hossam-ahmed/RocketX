/* ==========================================================================
   Navigation Menu
   ========================================================================== */

.nav-menu-placeholder {
    @include padd-start(0);
    opacity: 0;
    visibility: hidden;
    @include start(0);
    top: 30px;
    bottom: 30px;
    width: 250px;
    z-index: 100;
    @include border-radius-all(0, $border-radius-regular, $border-radius-regular, 0);
    background-color: desaturate(darken(map-get($theme-colors, primary), 18%), 20%);
    box-shadow: -5px 0 25px rgba(0,0,0,.5);
    @include move-start(105%);
    @extend .fixed-xs;

    .nav-menu-home-link {
        font-size: .76em;
        color: map-get($theme-colors, primary);
        background-color: desaturate(darken(map-get($theme-colors, primary), 18%), 20%);
        z-index: 10100;
        padding: 15px 10px 10px;
        @include border-radius-all(0, $border-radius-regular, 0, 0);
        border-bottom: 2px solid map-get($theme-colors, default);
        @extend .border-box-xs, .full-width-xs, .absolute-xs;

        .nav-menu-icon {
            width: 40px;
            @extend .in-block-xs;
        }

        .nav-menu-title {
            font: normal 1.3em $basic-font;
            @include padd-start(10px);
            @extend .border-box-xs;
        }

        &:before {
            content: '';
            @extend .absolute-xs;
            @include end(0);
            bottom: -1px;
            width: 0;
            height: 0;
            border-top: 20px solid transparent;
            @include border-start(20px solid transparent);
            @include border-end(20px solid desaturate(darken(map-get($theme-colors, primary), 18%), 20%));
        }

        &:hover {
            background-color: map-get($theme-colors, default);
        }
    }

    .nav-menu-close {
        background: rgba(255,255,255,0.2);
        @include end(10px);
        bottom: 10px;
        opacity: .5;
        font-size: .9em;
        padding: 5px;
        border-radius: $border-radius-regular;
        z-index: 1500;
        cursor: pointer;
        @extend .absolute-xs, .txt_white-clr-xs, .simple-mono-transition-xs !optional;

        &:hover {
            opacity: .7;
        }
    }

    .ms-core-listMenu-horizontalBox {
        .ms-core-listMenu-root {
            > li {
                @extend .block-xs;

                > ul.static {
                    width: 100%;
                    top: 0;
                    bottom: 45px;
                    padding-top: 100px;
                    overflow: auto;
                    @extend .block-xs, .absolute-xs, .border-box-xs;

                    > li {
                        clear: both;
                        @extend .block-xs, .clearfix-xs;

                        > span, > a {
                            padding: 10px 15px;
                            font-size: .9em;
                            clear: both;
                            color: lighten(map-get($theme-colors, primary), 5%);
                            @extend .txt-start-xs;

                            &:before {
                                @include start(0);
                                left: auto;
                                top: 50%;
                                bottom: 50%;
                                width: 2px;
                            }

                            &:after {
                                @extend .hide-xs;
                            }

                            &:hover {
                                color: map-get($theme-colors, primary);
                                background-color: rgba(255,255,255,.1);
                            }
                        }

                        > ul.dynamic {
                            max-height: 0;
                            min-width: 0;
                            @include start(0);
                            background-color: desaturate(darken(map-get($theme-colors, primary), 20%), 22%);
                            border-radius: 0;
                            width: 100% !important;
                            box-shadow: inset 0 15px 10px -10px rgba(0,0,0,0.3);
                            @extend .block-xs, .relative-xs, .pull-start-xs;
                            // HOVERED
                            opacity: 1;
                            visibility: visible;
                            /*margin-bottom: 10px;*/
                            max-height: 200px;
                            -moz-transform: none;
                            -ms-transform: none;
                            -o-transform: none;
                            -webkit-transform: none;
                            transform: none;

                            > li {
                                > a {
                                    &:hover {
                                        background-color: transparent;
                                        color: map-get($theme-colors, secondary);
                                    }
                                }
                            }

                            &:before {
                                @extend .hide-xs;
                            }
                        }
                        /*&:hover {
                            > ul.dynamic {
                                opacity: 1;
                                visibility: visible;
                                margin-bottom: 10px;
                                max-height: 200px;
                            }
                        }*/
                        &.selected {
                            > span, > a {
                                background-color: map-get($theme-colors, default);
                                color: #fff;

                                &:active {
                                    -moz-transform: scale(1);
                                    -ms-transform: scale(1);
                                    -o-transform: scale(1);
                                    -webkit-transform: scale(1);
                                    transform: scale(1);
                                }

                                &:before, &:after {
                                    @extend .hide-xs;
                                }
                            }
                        }

                        &.dynamic-children {
                            > a {
                                &.dynamic-children {
                                    .dynamic-children.additional-background {
                                        &:before {
                                            @extend .hide-xs;
                                        }

                                        &:after {
                                            @extend .pull-end-xs;
                                        }
                                    }
                                }
                            }
                        }
                    }
                    /*&:before {
                        content: @menu-nav-title;
                        background: url('../../images/rcy-logo.png') no-repeat center;
                        background-size: 17%;
                        background-position: center right 15px;
                        .padd-all(15px, 15px, 15px, 58px);
                        .mr-all(20px, 0, 0, 0);
                        font-size: .85em;
                        &:extend(.block-xs, .border-box-xs, .full-width);
                    }*/
                }
            }
        }
    }

    .ms-core-listMenu-verticalBox {
        .ms-core-listMenu-root {
            > li {
                @extend .pull-start-xs, .border-box-xs, .full-width-xs;

                &:first-child {
                    margin-top: 0;
                }
            }
        }
    }

    &.vertical-nav-menu {
        background-color: transparent;
        position: static;
        opacity: 1;
        visibility: visible;
        -moz-transform: none;
        -ms-transform: none;
        -o-transform: none;
        -webkit-transform: none;
        transform: none;
        box-shadow: none;
        border-radius: $border-radius-regular;
        @extend .full-width-xs;
    }
}

.nav-menu-toggler {
    &:checked {
        ~ .nav-menu-placeholder {
            opacity: 1;
            visibility: visible;
            -moz-transform: translateX(0);
            -ms-transform: translateX(0);
            -o-transform: translateX(0);
            -webkit-transform: translateX(0);
            transform: translateX(0);
        }

        ~ .nav-menu-overlay {
            opacity: .8;
            visibility: visible;
            z-index: 100;
            background: url('#{$relative-path}images/overlay-bg.jpg') center no-repeat;
            background-size: cover;
        }
    }
}
